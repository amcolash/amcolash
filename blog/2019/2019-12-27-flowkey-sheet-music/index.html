<!DOCTYPE html><html><head><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-114681426-1"></script><script>
            window.dataLayer = window.dataLayer || [];
            function gtag() { dataLayer.push(arguments); }
            gtag(&#x27;js&#x27;, new Date());

            gtag(&#x27;config&#x27;, &#x27;UA-114681426-1&#x27;);</script><link rel="preconnect" href="https://fonts.gstatic.com"/><link href="https://fonts.googleapis.com/css2?family=Rubik&amp;display=swap" rel="stylesheet"/><style>
            body.dark-mode { background: #222; color: #eee; }
            body.light-mode { background: #eee; color: #222; }
            .light-mode :focus, .dark-mode .resume :focus { outline: 3px solid #222; }
            .dark-mode :focus { outline: 3px solid #eee; }
            * { transition: background 0.25s; }
            a { transition: color 0.25s; }
            .post img, .project img { max-width: 100%; }
          </style><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-e77bcd52d9070b715c01.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.f8bd46fc02868c500bda.js" as="script"/><link rel="preload" href="/_next/static/chunks/0091a7db1bec141872318e71233f7f833a8550ed.08f6d00f79c03a1b2d35.js" as="script"/><link rel="preload" href="/_next/static/chunks/4b58f52b29e540464fd1347ed85f5126d9ee4864.19b319e57ed259b01161.js" as="script"/><link rel="preload" href="/_next/static/chunks/2f49bbf3f1e34c44a2e41bcd83e07ce234329da0.927246fe2540b3a5ac01.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-6383af768330ae616de1.js" as="script"/><link rel="preload" href="/_next/static/chunks/dbf3ce33.ee07453abeb80771c15f.js" as="script"/><link rel="preload" href="/_next/static/chunks/faa552d195daf7240ff6c6e151b90b359a413e98.ead09819a85754be4602.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5B...slug%5D-fa02598e447e55493cb5.js" as="script"/></head><body style="margin:0;font-family:Rubik, sans-serif;font-size:1.25rem"><script src="noflash.js"></script><div id="__next"><div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Flowkey Sheet Music Scraper","date":"2019-12-27T20:45:16.000Z","slug":"2019/2019-12-27-flowkey-sheet-music","content":"\u003cp\u003eNote: This post mentions the paid service flowkey, it is not sponsored in any way - I just really like it! Also, I am not sure if this breaks their TOS but I am not wanting to abuse their service - just to help me learn a few songs here and there.\u003c/p\u003e\n\u003ch2\u003eLearning Piano with Flowkey\u003c/h2\u003e\n\u003cp\u003eRecently, I got a piano to play as a new hobby. It has been great learning to play and having a new creative outlet for when I need it. Since it had been about 15 years since I last played, I needed a way to learn. Luckily, I found a site/app called \u003ca href=\"https://flowkey.com/\"\u003eflowkey\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/blog/2019/flowkey/flowkey.png\" alt=\"flowkey\"\u003e\u003c/p\u003e\n\u003cp\u003eFlowkey works by connecting a computer or mobile device via MIDI or listening with a microphone. As you play the different notes, it moves along the sheet music. Until you correctly play the right notes, it will not continue moving along the music. If you are learning piano, definitely take a look at it - it's quite reasonable. There are a whole bunch of songs to learn at your own pace and they also have some lessons as well.\u003c/p\u003e\n\u003ch2\u003eGetting Sheet Music\u003c/h2\u003e\n\u003cp\u003eAlthough flowkey is great for learning music, you can't print the sheet music by itself. Having the entire music in front of you without needing an app is quite useful for mastering a song without any help. Of course, since it is a webapp I started digging.\u003c/p\u003e\n\u003cp\u003eI found quickly that the music is served as a series of images to the browser. I started writing a script to grab the images and stitch them together. After I had and started looking at each image, I found they are not necessarily split by meausure but instead at a fixed pixel value.\u003c/p\u003e\n\u003cp\u003eTrying to make sheet music as you would see it in the wild reuires breaks in the music every few measures, similar to a paragraph with words and wrapping along between lines.\u003c/p\u003e\n\u003ch2\u003eParsing the Image\u003c/h2\u003e\n\u003cp\u003eLuckily there are ways to turn images into music! I found an open source program called \u003ca href=\"https://github.com/Audiveris/audiveris\"\u003eaudiveris\u003c/a\u003e which does Optical Music Recognition (OMR), which similar to OCR allows images to be converted into sheet music. The sheet music is stored in the \u003ca href=\"http://www.musicxml.com/\"\u003eMusicXML\u003c/a\u003e format - an open standard for storing sheet music.\u003c/p\u003e\n\u003cp\u003eThe parsed music is surprisingly accurate and with a few small tweaks can be an exact duplicate. I use a service called \u003ca href=\"https://www.noteflight.com/\"\u003enoteflight\u003c/a\u003e to fix up the music and then to export.\u003c/p\u003e\n\u003ch2\u003eThe \u003ca href=\"https://gist.github.com/amcolash/433421a9a729ef42461b48bd006c50af\"\u003eCode\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eNow that I have explained a bit about the the problem and how I got here, here is a \u003ca href=\"https://gist.github.com/amcolash/433421a9a729ef42461b48bd006c50af\"\u003egist\u003c/a\u003e. With the code I have used. The file \u003ccode\u003eflowkey.js\u003c/code\u003e is used to grab the base url from flowkey (just paste it into your js debugger console). After running that, you will need to run \u003ccode\u003enoteflight.sh\u003c/code\u003e which grabs the images, stiches them, runs audiveris and finally tries to open noteflight.\u003c/p\u003e\n\u003cp\u003eHopefully the code has enough comments inline to explain the process!\u003c/p\u003e\n"}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["2019","2019-12-27-flowkey-sheet-music"]},"buildId":"oDmhoVSqZ1xFLSTJjrUEC","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-e893e522365b6e0e5fa4.js"></script><script src="/_next/static/chunks/main-e77bcd52d9070b715c01.js" async=""></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.f8bd46fc02868c500bda.js" async=""></script><script src="/_next/static/chunks/0091a7db1bec141872318e71233f7f833a8550ed.08f6d00f79c03a1b2d35.js" async=""></script><script src="/_next/static/chunks/4b58f52b29e540464fd1347ed85f5126d9ee4864.19b319e57ed259b01161.js" async=""></script><script src="/_next/static/chunks/2f49bbf3f1e34c44a2e41bcd83e07ce234329da0.927246fe2540b3a5ac01.js" async=""></script><script src="/_next/static/chunks/pages/_app-6383af768330ae616de1.js" async=""></script><script src="/_next/static/chunks/dbf3ce33.ee07453abeb80771c15f.js" async=""></script><script src="/_next/static/chunks/faa552d195daf7240ff6c6e151b90b359a413e98.ead09819a85754be4602.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-fa02598e447e55493cb5.js" async=""></script><script src="/_next/static/oDmhoVSqZ1xFLSTJjrUEC/_buildManifest.js" async=""></script><script src="/_next/static/oDmhoVSqZ1xFLSTJjrUEC/_ssgManifest.js" async=""></script></body></html>