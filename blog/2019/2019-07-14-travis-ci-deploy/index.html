<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-114681426-1"></script><script>
                window.dataLayer = window.dataLayer || [];
                function gtag() { dataLayer.push(arguments); }
                gtag('js', new Date());

                gtag('config', 'UA-114681426-1');
              </script><link rel="preconnect" href="https://fonts.gstatic.com"/><style>
            body.dark-mode { background: #222; color: #eee; }
            body.light-mode { background: #eee; color: #222; }
            .light-mode :focus, .dark-mode .resume :focus { outline: 3px solid #222; }
            .dark-mode :focus { outline: 3px solid #eee; outline-offset: 2px; }
            * { transition: background 0.25s; }
            a { transition: color 0.25s; }
            .post img, .project img { max-width: 100%; }
          </style><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/_next/static/css/eb66e581627508d2.css" as="style"/><link rel="stylesheet" href="/_next/static/css/eb66e581627508d2.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-df640c50036fae59.js" defer=""></script><script src="/_next/static/chunks/framework-1b1477f9717fa649.js" defer=""></script><script src="/_next/static/chunks/main-cf34d16fa8b8996f.js" defer=""></script><script src="/_next/static/chunks/pages/_app-e9e042ada6fc21d7.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-3ca7a208305e348d.js" defer=""></script><script src="/_next/static/iOha5Fv7HF83XXjPetL-I/_buildManifest.js" defer=""></script><script src="/_next/static/iOha5Fv7HF83XXjPetL-I/_ssgManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Rubik&display=swap">@font-face{font-family:'Rubik';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/rubik/v26/iJWZBXyIfDnIV5PNhY1KTN7Z-Yh-B4i1Uw.woff) format('woff')}@font-face{font-family:'Rubik';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/rubik/v26/iJWZBXyIfDnIV5PNhY1KTN7Z-Yh-B4iFWkUzdYPFkZVOA6w.woff) format('woff');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Rubik';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/rubik/v26/iJWZBXyIfDnIV5PNhY1KTN7Z-Yh-B4iFU0UzdYPFkZVOA6w.woff) format('woff');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Rubik';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/rubik/v26/iJWZBXyIfDnIV5PNhY1KTN7Z-Yh-B4iFVUUzdYPFkZVOA6w.woff) format('woff');unicode-range:U+0590-05FF,U+200C-2010,U+20AA,U+25CC,U+FB1D-FB4F}@font-face{font-family:'Rubik';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/rubik/v26/iJWZBXyIfDnIV5PNhY1KTN7Z-Yh-B4iFWUUzdYPFkZVOA6w.woff) format('woff');unicode-range:U+0100-02AF,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Rubik';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/rubik/v26/iJWZBXyIfDnIV5PNhY1KTN7Z-Yh-B4iFV0UzdYPFkZVO.woff) format('woff');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><script src="/noflash.js"></script><div id="__next" data-reactroot=""><div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Deploying with Travis CI","date":"2019-07-14T23:28:02.000Z","slug":"2019/2019-07-14-travis-ci-deploy","content":"\u003ch2\u003eHello Travis!\u003c/h2\u003e\n\u003cp\u003eI forgot to write a quick post about setting up \u003ca href=\"http://travis-ci.org\"\u003eTravis CI\u003c/a\u003e for building my website. After the investigations into rewriting \u003ca href=\"https://amcolash.com/2019/07/02/if-it-aint-broke-dont-fix-it.html\"\u003ehere\u003c/a\u003e and \u003ca href=\"https://amcolash.com/2019/06/18/rewriting-my-website.html\"\u003ehere\u003c/a\u003e, I decided that it was too much work and I chose to stick with jekyll.\u003c/p\u003e\n\u003cp\u003eOne of the pain points of working with this system is that since I am using some custom plugins, I am unable to have github pages auto-deploy my website. This means that to get an auto-deployed website, I need to go through a different 3rd party. Luckily this is where travis comes to the rescue!\u003c/p\u003e\n\u003cp\u003eTravis CI is a free CI/CD environment for open source projects and allows you to build and deploy code based on various triggers. For me, a simple push to the \u003ccode\u003emaster\u003c/code\u003e branch of my website \u003ca href=\"https://github.com/amcolash/amcolash\"\u003eGithub Repo\u003c/a\u003e will kick off a build. If all goes well, it then pushes that build to the \u003ccode\u003egh-pages\u003c/code\u003e branch of my site. Using this configuration significantly reduced the complexity of updating my website and means that I do not need to remember to build before committing.\u003c/p\u003e\n\u003ch2\u003eGetting Things Running\u003c/h2\u003e\n\u003cp\u003eI found some great sources of help on the internet, but of course customized my build to my tastes. One interesting pain-point that I ran into was getting github submodules checked out. I have a submodule that contains my current(ish) resume which I need to grab when building my site. I had to do some trickery to get that cloned since it is set up with an \u003ccode\u003essh\u003c/code\u003e-styled remote url. This is an issue since I prefer to use \u003ccode\u003essh\u003c/code\u003e to push to github instead of the \u003ccode\u003ehttps\u003c/code\u003e protocol (so I don't need to always specify my password). Based off of a conversation \u003ca href=\"https://github.com/algolia/examples/issues/24\"\u003ehere\u003c/a\u003e, others were having a similar issue.\u003c/p\u003e\n\u003cp\u003eThe solution is fairly simple, just use \u003ccode\u003esed\u003c/code\u003e to replace \u003ccode\u003egit@github.com\u003c/code\u003e with \u003ccode\u003ehttps://github.com\u003c/code\u003e in the \u003ccode\u003e.gitmodules\u003c/code\u003e file and then manually grab the module.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e# Handle git submodules yourself, based off of https://github.com/algolia/examples/issues/24\ngit:\n  submodules: false\n# Use sed to replace the SSH URL with the public URL, then initialize submodules\nbefore_install:\n  - sed -i 's/git@github.com:/https:\\/\\/github.com\\//' .gitmodules\n  - git submodule update --init --recursive\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAfter getting the submodule working properly, the only other bits were getting some caching in place and setting up a github token to push to the repository. This is then set up as an environment variable for the build and the \u003ccode\u003e.travis.yaml\u003c/code\u003e file has access to it.\u003c/p\u003e\n\u003cp\u003eIt is so nice to be able to have my blog now updated whenever I write a post. Oh, and I also get to use a fancy badge now so that I can see if things are working properly :grin:\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://travis-ci.org/amcolash/amcolash\"\u003e\u003cimg src=\"https://img.shields.io/travis/amcolash/amcolash.svg\" alt=\"Travis (.org)\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003ch2\u003eFinal \u003ccode\u003e.travis.yml\u003c/code\u003e Configuration\u003c/h2\u003e\n\u003cp\u003eHere you can see the final \u003ccode\u003e.travis.yml\u003c/code\u003e file. What a simple little bit of code and a few checkboxes to get it all running! Travis is really fast and really worth it whether you have a public or private repo and can get you on the CI/CD pipeline quickly and painlessly.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003elanguage: ruby\ncache: bundler # caching bundler gem packages will speed up build\n\nbranches:\n  only:\n    - master\n\nscript:\n  - JEKYLL_ENV=production bundle exec jekyll build --destination docs\n\ndeploy:\n  provider: pages\n  local-dir: ./docs\n  skip-cleanup: true\n  github-token: $GITHUB_TOKEN\n  keep-history: true\n\n############### Git Submodule (for resume) Hack ###############\n\n# Handle git submodules yourself, based off of https://github.com/algolia/examples/issues/24\ngit:\n  submodules: false\n# Use sed to replace the SSH URL with the public URL, then initialize submodules\nbefore_install:\n  - sed -i 's/git@github.com:/https:\\/\\/github.com\\//' .gitmodules\n  - git submodule update --init --recursive\n\u003c/code\u003e\u003c/pre\u003e\n"}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["2019","2019-07-14-travis-ci-deploy"]},"buildId":"iOha5Fv7HF83XXjPetL-I","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>